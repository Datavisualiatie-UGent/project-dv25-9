var s={value:function(){}};function u(){for(var n=0,i=arguments.length,t={},r;n<i;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new o(t)}function o(n){this._=n}function c(n,i){return n.trim().split(/^|\s+/).map(function(t){var r="",e=t.indexOf(".");if(e>=0&&(r=t.slice(e+1),t=t.slice(0,e)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}o.prototype=u.prototype={constructor:o,on:function(n,i){var t=this._,r=c(n+"",t),e,a=-1,l=r.length;if(arguments.length<2){for(;++a<l;)if((e=(n=r[a]).type)&&(e=h(t[e],n.name)))return e;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++a<l;)if(e=(n=r[a]).type)t[e]=f(t[e],n.name,i);else if(i==null)for(e in t)t[e]=f(t[e],n.name,null);return this},copy:function(){var n={},i=this._;for(var t in i)n[t]=i[t].slice();return new o(n)},call:function(n,i){if((e=arguments.length-2)>0)for(var t=new Array(e),r=0,e,a;r<e;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(a=this._[n],r=0,e=a.length;r<e;++r)a[r].value.apply(i,t)},apply:function(n,i,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],e=0,a=r.length;e<a;++e)r[e].value.apply(i,t)}};function h(n,i){for(var t=0,r=n.length,e;t<r;++t)if((e=n[t]).name===i)return e.value}function f(n,i,t){for(var r=0,e=n.length;r<e;++r)if(n[r].name===i){n[r]=s,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:i,value:t}),n}var p=u;export{p as dispatch};
